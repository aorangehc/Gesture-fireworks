# 🎆 手势烟花 - Gesture Fireworks

一个基于AI手势识别的交互式烟花特效应用，通过摄像头实时捕捉用户手势，触发绚丽的烟花效果。支持多手同时识别，让你的双手在空中绘制出美丽的烟花盛宴！

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![JavaScript](https://img.shields.io/badge/JavaScript-ES6+-yellow.svg)](https://developer.mozilla.org/en-US/docs/Web/JavaScript)
[![TensorFlow.js](https://img.shields.io/badge/TensorFlow.js-MediaPipe-orange.svg)](https://www.tensorflow.org/js)
[![Version](https://img.shields.io/badge/Version-1.0.0-blue.svg)](https://github.com/your-username/Gesture-fireworks/releases)

## ✨ 核心特性

- 🤖 **AI手势识别**：基于MediaPipe的高精度手势识别，支持8种不同手势
- 🎆 **绚丽烟花特效**：8种精美烟花效果，包括爆炸、心形、星形、螺旋等
- 👥 **多手支持**：同时识别双手手势，支持多手势并发触发，独立冷却机制
- 📹 **实时摄像头**：流畅的摄像头画面，智能镜像显示
- 🚀 **高性能渲染**：优化的Canvas 2D粒子系统，支持数千粒子同时渲染
- 🎨 **增强视觉效果**：多层光晕、粒子闪烁、动态颜色、拖尾效果
- 🔧 **智能算法**：多帧平滑、稳定性检测、动态置信度、冷却机制
- 📱 **响应式设计**：自适应不同屏幕尺寸，支持移动端和桌面端

## 🎮 手势对应效果

| 手势 | 烟花效果 | 描述 | 特色 |
|------|----------|------|------|
| ✊ 拳头 (FIST) | 爆炸烟花 (FireworkBurst) | 金黄系多层圆形爆炸 | 粒子数高、冲击感强 |
| 👌 OK手势 (OK) | 圆形烟花 (FireworkCircle) | 暖红橙系双环高密度爆裂 | 扩散均匀、环数多 |
| 💖 比心 (HEART) | 心形烟花 (FireworkHeart) | 心形参数曲线爆炸 | 粉色系、浪漫柔和 |
| 👍 竖拇指 (THUMBS_UP) | 星形烟花 (FireworkStar) | 金白系五角星形爆炸 | 闪烁动画、光晕明显 |
| ✌️ 剪刀手 (PEACE) | 螺旋烟花 (FireworkSpiral) | 紫色系螺旋扩散 | 层次感强、旋转轨迹 |
| 👉 指向 (POINTING) | 伞形烟花 (FireworkUmbrella) | 深浅蓝系上半圆伞形 | 垂直速度小、下落柔和 |
| ✋ 张开手掌 (OPEN_PALM) | 基础烟花A (FireworkA) | 随机色环形爆裂 + 拖尾 | 通用基底、随机色调 |

### 触发与参数说明
- 触发入口与映射：在应用主入口中根据识别到的手势触发对应烟花效果，并为不同手势传入差异化参数以提高区分度（如粒子数量、配色）：`src/main.js:76-97`
- 指尖/手掌定位：不同手势使用不同关键点作为触发位置（如点赞用拇指、指向用食指、握拳/张掌用掌心），并映射到画布坐标：`src/main.js:50-65`
- 可调选项：所有触发器均支持 `options` 参数（如 `particleCount`、`duration`、`colors`），便于进一步微调效果：`src/main.js:164-187`

### 识别与稳定性
- 多帧平滑与稳定帧：默认 `smoothingFrames=10`、`stableFrames=6`，在保证响应速度的同时降低抖动误识别：`src/main.js:33-40`
- 动态阈值：不同手势采用更高的动态置信度阈值（如 `FIST/OK/THUMBS_UP/PEACE/POINTING` 为 `0.85`，`OPEN_PALM` 为 `0.8`）：`src/hand/advanced-gesture.js:18-26`
- 置信度差额门限：最佳手势与次佳手势置信度差需≥`0.12`，用于避免相近手势互相“挤占”：`src/hand/advanced-gesture.js:64-74`
- 冷却与上升沿触发：识别器冷却时间与实例参数一致，默认 `cooldownMs=350`，仅当稳定手势发生变化时触发：`src/hand/advanced-gesture.js:39-46`

## ✋ 手势姿势详解（如何正确触发）

- FIST（拳头）
  - 四指弯曲收拢至掌心，指尖靠近对应掌指关节；拇指收起并靠近食指掌根侧。
  - 手背或手心朝向摄像头均可，整体呈闭合拳头形态。
  - 保持姿势 1–2 秒以通过稳定帧判定。
  - 常见误差：拇指外伸或四指未充分弯曲 → 更靠近掌心并收拢。

- OK（OK手势）
  - 拇指与食指指尖轻触，形成较小圆圈（建议圆圈直径小于掌宽约 1/3）。
  - 其他三指（中/无名/小指）伸直并与手腕的距离明显增大，手心朝摄像头更易识别。
  - 保持 1–2 秒；圆圈过大或三指未伸直会降低置信度。

- HEART（比心）
  - 单手版：拇指与食指指尖靠近形成心形上弧，中指辅助靠近；无名指与小指适度收拢。
  - 双手版（推荐）：左右手的拇指与食指分别靠近，合并形成更完整的心形轮廓。
  - 保持 1–2 秒；建议在画面中央完成动作以获得更高置信度。

- THUMBS_UP（竖拇指）
  - 拇指竖直向上，拇指指尖显著高于拇指掌指关节；其余四指收拢弯曲。
  - 手背朝摄像头更稳定，避免拇指倾斜角度过小。
  - 保持 1–2 秒；若拇指未明显“上举”，会被判定为不成立。

- PEACE（剪刀手）
  - 食指与中指同时伸直，并彼此分开约一个指宽以上；拇指、无名指、小指收拢。
  - 手背或手心均可，建议位于画面中央区域以避免透视造成分离度不足。
  - 保持 1–2 秒；若食/中指分离度不足或未伸直，会降低置信度。

- POINTING（指向）
  - 食指单独伸直指向前方，其余四指（拇/中/无名/小指）收拢弯曲；拇指靠近掌根。
  - 确保食指指尖到手腕距离明显大于掌指关节到手腕距离。
  - 保持 1–2 秒；若其他手指也伸直会影响判定。

- OPEN_PALM（张开手掌）
  - 五指完全伸直并张开，手指间留有明显间距；手心朝向摄像头。
  - 指尖与手腕之间的距离应显著大于掌指关节到手腕的距离。
  - 保持 1–2 秒；若手指没有张开或间距过小，会降低置信度。

### 姿势与环境建议
- 光线：充足的正面光避免强阴影与背光；肤色与背景对比更清晰。
- 距离：距离摄像头约 1–2 米，手部占画面约 1/4；保持在画面中央区域。
- 稳定：保持手势稳定 1–2 秒以通过 `stableFrames`；过快切换可能因冷却而忽略。
- 单/双手：部分手势（如 HEART）双手更易识别与触发更具代表性的效果。

## 🚀 快速开始

### 环境要求

- 现代浏览器（Chrome 88+、Firefox 85+、Safari 14+、Edge 88+）
- 摄像头设备（支持WebRTC）
- 本地HTTP服务器（用于摄像头权限）
- 网络连接（首次加载MediaPipe模型）

### 安装运行

1. **克隆项目**
   ```bash
   git clone https://github.com/your-username/Gesture-fireworks.git
   cd Gesture-fireworks
   ```

2. **启动本地服务器**
   
   使用Python（推荐）：
   ```bash
   # Python 3
   python -m http.server 8000
   
   # Python 2
   python -m SimpleHTTPServer 8000
   ```
   
   或使用Node.js：
   ```bash
   npx http-server -p 8000 -a localhost
   ```

3. **打开浏览器**
   
   访问 `http://localhost:8000`

4. **授权摄像头**
   
   首次访问时，浏览器会请求摄像头权限，请点击"允许"

## 🎯 使用方法

1. **准备姿势**：站在摄像头前，确保手部清晰可见
2. **做出手势**：参考上方手势表格，做出对应手势
3. **观看烟花**：系统识别手势后会自动触发相应的烟花效果
4. **多手操作**：可以同时使用双手做不同手势，触发多重烟花效果

### 使用技巧

- 🔆 **光线充足**：确保环境光线良好，避免背光和强烈阴影
- 📏 **适当距离**：保持与摄像头1-2米的距离，手部占画面1/4左右
- 🤚 **手势清晰**：做手势时动作要清晰、稳定，保持1-2秒
- ⏱️ **等待识别**：每个手势有350ms冷却时间，避免过快切换
- 🎯 **居中显示**：将手部保持在画面中央区域效果最佳
- 👥 **多手操作**：双手可以同时做不同手势，创造组合烟花效果
